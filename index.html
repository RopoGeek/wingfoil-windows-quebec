<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WIND-FILTRATOR - Quebec</title>

  <!-- SEO & Share -->
  <meta name="description" content="WIND-FILTRATOR - Quebec : filtrez les fenêtres favorables aux sports de vent (vent, marée, direction) pour des spots populaires autour de Québec.">
  <meta property="og:title" content="WIND-FILTRATOR - Quebec">
  <meta property="og:description" content="Filtre et visualisation des conditions favorables (vents, marées, directions) pour Beauport, Ste-Anne, St-Jean et Ange-Gardien.">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="fr_CA">
  <meta property="og:site_name" content="WIND-FILTRATOR">
  <meta http-equiv="refresh" content="3600" />

  <!-- Favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

  <style>
    :root{
      --neutral:#eee; --blank:#fff;
      --g1:#e9f9e4; --g2:#b7f3af; --y1:#fff3b0; --y2:#ffd36e; --r1:#ffb3a8; --r2:#ff8a80;
      --grid-border:#ddd; --text:#222; --muted:#666;
      --tide-rise:#0a6; --tide-fall:#b00; --tide-slack:#bbb; --tide-unk:transparent;
    }
    body{font-family:system-ui,Segoe UI,Arial;margin:20px;color:var(--text);background:#f9f9f9}
    header{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    h1{font-size:24px;margin:0}
    .pill{border:1px solid #aaa;border-radius:999px;padding:2px 8px;font-size:12px;color:#444}
    .muted{color:var(--muted);font-size:13px}
    .collapsible{border:1px solid #e6e6e6;border-radius:10px;background:#fafafa;margin:10px 0}
    .collapsible summary{cursor:pointer;padding:10px 12px;font-weight:600}
    .collapsible .content{padding:10px 12px;font-size:14px}
    #map{height:260px;width:100%;border-radius:8px}

    /* Filters */
    .settings-wrap{border:1px solid var(--grid-border);border-radius:10px;padding:10px;margin:10px 0 14px;background:#fff}
    .settings-grid{display:grid;gap:10px}
    @media(min-width:900px){.settings-grid{grid-template-columns:220px 1fr 220px}}
    .settings-section h3{margin:0 0 6px;font-size:14px}
    select{padding:6px 8px;border:1px solid #ccc;border-radius:8px}

    /* Spot buttons moved here */
    .tabs{display:flex;gap:12px;margin:16px 0;flex-wrap:wrap;justify-content:center}
    .tab{
      font-size:16px;font-weight:700;
      padding:10px 16px;border:2px solid #555;border-radius:12px;
      cursor:pointer;background:#fff;transition:all .2s
    }
    .tab.active{background:#0a6;color:#fff;border-color:#0a6}

    /* Matrix */
    .matrix-wrap{overflow-x:auto;border:1px solid var(--grid-border);border-radius:10px;background:#fff}
    table{border-collapse:separate;border-spacing:0;width:max-content;min-width:100%}
    th,td{border-right:1px solid #ddd;border-bottom:1px solid #ddd}
    th{position:sticky;top:0;background:#fafafa;font-weight:600;font-size:12px}
    th.hour{position:sticky;left:0;background:#fafafa;font-weight:500;width:60px}
    th.day{min-width:90px;text-align:center}
    td{height:18px;width:56px;padding:0}
    .cell{height:18px;display:flex;align-items:center;justify-content:center}
    .arrow{width:12px;height:12px;opacity:0.9}
  </style>
</head>
<body>
  <header>
    <h1>WIND-FILTRATOR - Quebec</h1>
    <span class="pill">Heure locale / Local time (America/Toronto)</span>
  </header>

  <!-- Intro / conditions / tides collapsibles (unchanged) -->
  <details class="collapsible" open><summary>Introduction</summary>
    <div class="content"><p>...texte bilingue d’introduction...</p></div>
  </details>
  <details class="collapsible"><summary>Conditions par site / Spot Conditions</summary>
    <div class="content"><p>...règles par site...</p></div>
  </details>
  <details class="collapsible"><summary>Marées / Tides</summary>
    <div class="content"><p>...explication marées + liens...</p></div>
  </details>

  <!-- Map -->
  <details class="collapsible" open><summary>Carte / Map</summary>
    <div class="content"><div id="map"></div></div>
  </details>

  <!-- Filters -->
  <div class="settings-wrap"><div class="settings-grid">
    <div class="settings-section"><h3>Rafale min / Min gust</h3><select><option>10 kn</option></select></div>
    <div class="settings-section"><h3>Directions</h3><div>...chips...</div></div>
    <div class="settings-section"><h3>Marée / Tide</h3><div>...checkboxes...</div></div>
  </div></div>

  <!-- Spot selection buttons (moved here) -->
  <div class="tabs" id="tabs">
    <button class="tab active" data-target="beauport">Baie de Beauport</button>
    <button class="tab" data-target="ste_anne">Ste-Anne-de-Beaupré</button>
    <button class="tab" data-target="st_jean">St-Jean, Île d’Orléans</button>
    <button class="tab" data-target="ange_gardien">Ange-Gardien</button>
  </div>

  <!-- Matrices -->
  <div id="matrices"></div>

  <script>
    // JS unchanged except tabs now below filters
    document.querySelectorAll('.tab').forEach(btn=>{
      btn.onclick=()=>{
        document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        // switch matrix...
      };
    });
  </script>
</body>
</html>
